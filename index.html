<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ù…Ù†ÙˆÛŒ Ø±Ø³ØªÙˆØ±Ø§Ù†</title>
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #f6f6f6;
    --card: #fff;
    --text: #000;
    --border: #ddd;
    --gray-bg: #aaa;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --bg: #121212;
      --card: #1e1e1e;
      --text: #eee;
      --border: #444;
      --gray-bg: #333;
    }
  }

  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body {
    font-family: 'Vazirmatn', sans-serif;
    background-color: #9e9e9e; /* Ø®Ø§Ú©Ø³ØªØ±ÛŒ Ø³Ø§Ø¯Ù‡ */
    background-image: 
      linear-gradient(45deg, rgba(255,255,255,0.2) 25%, transparent 25%),
      linear-gradient(-45deg, rgba(255,255,255,0.2) 25%, transparent 25%);
    background-size: 30px 30px;
    margin: 0;
    color: var(--text);
    min-height: 100vh;
  }

  header {
    background: #222;
    color: #fff;
    padding: 20px;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3);
  }

  .logo {
    max-width: 100px;
    display: block;
    margin: 0 auto 10px;
    border-radius: 12px;
  }

  .container {
    max-width: 1000px;
    margin: auto;
    padding: 20px;
  }

  /* Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ù„Ø§ÛŒ ØµÙØ­Ù‡ */
  .toolbar {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items: center;
    justify-content: space-between;
    background: var(--card);
    padding: 15px;
    border-radius: 16px;
    margin-bottom: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }

  .filters {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .filter-btn {
    background: transparent;
    border: 1px solid var(--border);
    padding: 6px 16px;
    border-radius: 30px;
    font-family: inherit;
    font-size: 14px;
    cursor: pointer;
    color: var(--text);
    transition: 0.2s;
  }

  .filter-btn.active {
    background: #0a7d2c;
    color: white;
    border-color: #0a7d2c;
  }

  .search-box {
    flex: 1;
    min-width: 200px;
  }

  .search-box input {
    width: 100%;
    padding: 8px 16px;
    border-radius: 30px;
    border: 1px solid var(--border);
    background: var(--card);
    color: var(--text);
    font-family: inherit;
  }

  .item-count {
    background: var(--gray-bg);
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 14px;
    color: white;
  }

  /* Ú©Ø§Ø±Øª ØºØ°Ø§ */
  .card {
    background: var(--card);
    border-radius: 20px;
    padding: 16px;
    margin: 12px 0;
    box-shadow: 0 6px 14px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    gap: 16px;
    transition: transform 0.2s, opacity 0.3s;
  }

  .card:hover {
    transform: translateY(-2px);
  }

  .foodimg {
    width: 80px;
    height: 80px;
    border-radius: 16px;
    object-fit: cover;
    background: #ccc;
  }

  .info {
    flex: 2;
  }

  .info b {
    font-size: 1.2rem;
  }

  .category-badge {
    background: #0d6efd;
    color: white;
    padding: 2px 8px;
    border-radius: 20px;
    font-size: 11px;
    display: inline-block;
    margin-top: 4px;
  }

  .price {
    color: #0a7d2c;
    font-weight: bold;
    font-size: 1.2rem;
    margin-right: auto;
    padding-left: 10px;
    white-space: nowrap;
  }

  .tag {
    background: #ffc107;
    border-radius: 20px;
    padding: 4px 10px;
    font-size: 12px;
    font-weight: 500;
    margin-right: 8px;
    display: inline-block;
  }

  .hidden {
    opacity: 0.4;
    filter: grayscale(0.6);
    order: 1;
  }

  .admin-controls {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
  }

  button {
    border: none;
    padding: 8px 14px;
    border-radius: 30px;
    font-family: inherit;
    font-size: 14px;
    cursor: pointer;
    transition: 0.2s;
    font-weight: 500;
  }

  .add {
    background: #0a7d2c;
    color: white;
    margin: 10px 0;
    font-size: 16px;
    padding: 10px 20px;
  }

  .edit {
    background: #ffc107;
    color: #000;
  }

  .delete {
    background: #dc3545;
    color: white;
  }

  .adminToggle {
    position: fixed;
    bottom: 20px;
    left: 20px;
    background: #222;
    color: white;
    padding: 10px 18px;
    border-radius: 40px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    z-index: 999;
  }

  /* Ù…ÙˆØ¯Ø§Ù„ */
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(3px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    visibility: hidden;
    opacity: 0;
    transition: 0.2s;
  }

  .modal-overlay.active {
    visibility: visible;
    opacity: 1;
  }

  .modal {
    background: var(--card);
    padding: 25px;
    border-radius: 28px;
    width: 90%;
    max-width: 500px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.5);
    max-height: 90vh;
    overflow-y: auto;
  }

  .modal h2 {
    margin-bottom: 20px;
    font-size: 1.8rem;
    border-bottom: 2px solid var(--border);
    padding-bottom: 10px;
  }

  .modal input, .modal select {
    width: 100%;
    padding: 12px 16px;
    margin: 8px 0 16px;
    border-radius: 16px;
    border: 1px solid var(--border);
    background: var(--card);
    color: var(--text);
    font-family: inherit;
    font-size: 1rem;
  }

  .modal label {
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 15px 0;
    cursor: pointer;
  }

  .modal .checkbox-label {
    display: inline-flex;
    align-items: center;
    gap: 8px;
  }

  .modal-buttons {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    margin-top: 20px;
  }

  .save {
    background: #0a7d2c;
    color: white;
    padding: 12px 24px;
  }

  .cancel {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--text);
  }

  .footer-note {
    text-align: center;
    margin-top: 40px;
    color: var(--text);
    opacity: 0.7;
    font-size: 14px;
  }
</style>
</head>
<body>
<header>
  <img class="logo" src="" alt="Ù„ÙˆÚ¯ÙˆÛŒ Ø±Ø³ØªÙˆØ±Ø§Ù†">
  <h1>ğŸ“‹ Ù…Ù†ÙˆÛŒ Ø±Ø³ØªÙˆØ±Ø§Ù†</h1>
  <p id="mode">Ø­Ø§Ù„Øª Ù…Ø´Ø§Ù‡Ø¯Ù‡</p>
</header>

<div class="container">
  <div class="toolbar">
    <div class="filters" id="filterContainer">
      <button class="filter-btn active" data-filter="all">Ù‡Ù…Ù‡</button>
      <button class="filter-btn" data-filter="Ù¾ÛŒØ´ ØºØ°Ø§">ğŸ½ Ù¾ÛŒØ´ ØºØ°Ø§</button>
      <button class="filter-btn" data-filter="ØºØ°Ø§ÛŒ Ø§ØµÙ„ÛŒ">ğŸ› ØºØ°Ø§ÛŒ Ø§ØµÙ„ÛŒ</button>
      <button class="filter-btn" data-filter="Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ">ğŸ¥¤ Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ</button>
    </div>
    <div class="search-box">
      <input type="text" id="searchInput" placeholder="ğŸ” Ø¬Ø³ØªØ¬ÙˆÛŒ Ù†Ø§Ù… ØºØ°Ø§...">
    </div>
    <span class="item-count" id="itemCount">Û°</span>
  </div>

  <button class="add" onclick="openModal()" id="addBtn" style="display:none;">+ Ø§ÙØ²ÙˆØ¯Ù† Ø¢ÛŒØªÙ… Ø¬Ø¯ÛŒØ¯</button>

  <div id="menu"></div>
  <div class="footer-note" id="emptyMessage" style="display:none;">Ù‡ÛŒÚ† Ø¢ÛŒØªÙ…ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.</div>
</div>

<button class="adminToggle" onclick="toggleAdmin()">ğŸ” ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±</button>

<!-- Ù…ÙˆØ¯Ø§Ù„ ÙØ±Ù… -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal">
    <h2 id="modalTitle">Ø§ÙØ²ÙˆØ¯Ù† Ø¢ÛŒØªÙ…</h2>
    <form id="modalForm" onsubmit="return false;">
      <input type="text" id="name" placeholder="Ù†Ø§Ù… ØºØ°Ø§" required>
      <input type="text" id="price" placeholder="Ù‚ÛŒÙ…Øª (ØªÙˆÙ…Ø§Ù†)" required>
      <select id="category">
        <option>Ù¾ÛŒØ´ ØºØ°Ø§</option>
        <option>ØºØ°Ø§ÛŒ Ø§ØµÙ„ÛŒ</option>
        <option>Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ</option>
      </select>
      <input type="text" id="tag" placeholder="Ø¨Ø±Ú†Ø³Ø¨ (Ù…Ø«Ù„Ø§Ù‹ ØªÙ†Ø¯ØŒ Ú¯ÛŒØ§Ù‡ÛŒØŒ Ù¾Ø±ÙØ±ÙˆØ´)">
      <label class="checkbox-label">
        <input type="checkbox" id="hidden"> Ù…Ø®ÙÛŒ Ø´ÙˆØ¯ (ØªÙ…Ø§Ù… Ø´Ø¯Ù‡)
      </label>
      <div class="modal-buttons">
        <button type="button" class="cancel" onclick="closeModal()">Ø§Ù†ØµØ±Ø§Ù</button>
        <button type="submit" class="save" id="saveBtn">Ø°Ø®ÛŒØ±Ù‡</button>
      </div>
    </form>
  </div>
</div>

<script>
  let admin = false;
  let editingIndex = null;
  let menu = JSON.parse(localStorage.getItem('menu')) || [];

  // Ø­Ø§Ù„Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø§Ú¯Ø± Ù‡ÛŒÚ† Ø¢ÛŒØªÙ…ÛŒ Ù†Ø¨Ø§Ø´Ø¯ (Ø¨Ø±Ø§ÛŒ ØªØ³Øª)
  if (menu.length === 0) {
    menu = [
      { name: 'Ø²Ø±Ø´Ú© Ù¾Ù„Ùˆ Ø¨Ø§ Ù…Ø±Øº', price: 'Û±Û¸Û°,Û°Û°Û°', img: '', category: 'ØºØ°Ø§ÛŒ Ø§ØµÙ„ÛŒ', tag: 'Ù¾Ø±ÙØ±ÙˆØ´', hidden: false },
      { name: 'Ù…Ø§Ø³Øª Ùˆ Ø®ÛŒØ§Ø±', price: 'Û´Ûµ,Û°Û°Û°', img: '', category: 'Ù¾ÛŒØ´ ØºØ°Ø§', tag: 'Ú¯ÛŒØ§Ù‡ÛŒ', hidden: false },
      { name: 'Ø´Ø±Ø¨Øª Ø¢Ø¨Ù„ÛŒÙ…Ùˆ', price: 'Û³Ûµ,Û°Û°Û°', img: '', category: 'Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒ', tag: '', hidden: false }
    ];
  }

  let currentFilter = 'all';
  let searchTerm = '';

  // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± localStorage Ùˆ Ø±Ù†Ø¯Ø±
  function saveAndRender() {
    localStorage.setItem('menu', JSON.stringify(menu));
    render();
  }

  // Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù…ÙˆØ¯Ø§Ù„ (Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆØ¯Ù†)
  function openModal() {
    document.getElementById('modalTitle').innerText = 'Ø§ÙØ²ÙˆØ¯Ù† Ø¢ÛŒØªÙ…';
    document.getElementById('modalForm').reset();
    document.getElementById('hidden').checked = false;
    editingIndex = null;
    document.getElementById('modalOverlay').classList.add('active');
  }

  // Ø¨Ø³ØªÙ† Ù…ÙˆØ¯Ø§Ù„
  function closeModal() {
    document.getElementById('modalOverlay').classList.remove('active');
  }

  // ÙˆÛŒØ±Ø§ÛŒØ´ Ø¢ÛŒØªÙ…
  function editItem(index) {
    const item = menu[index];
    document.getElementById('modalTitle').innerText = 'ÙˆÛŒØ±Ø§ÛŒØ´ Ø¢ÛŒØªÙ…';
    document.getElementById('name').value = item.name || '';
    document.getElementById('price').value = item.price || '';
    document.getElementById('category').value = item.category || 'Ù¾ÛŒØ´ ØºØ°Ø§';
    document.getElementById('tag').value = item.tag || '';
    document.getElementById('hidden').checked = item.hidden || false;
    editingIndex = index;
    document.getElementById('modalOverlay').classList.add('active');
  }

  // Ø­Ø°Ù Ø¨Ø§ ØªØ§ÛŒÛŒØ¯
  function deleteItem(index) {
    if (confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† Ø¢ÛŒØªÙ… Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ')) {
      menu.splice(index, 1);
      saveAndRender();
    }
  }

  // Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙØ±Ù… Ù…ÙˆØ¯Ø§Ù„
  document.getElementById('modalForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const item = {
      name: document.getElementById('name').value.trim(),
      price: document.getElementById('price').value.trim(),
      category: document.getElementById('category').value,
      tag: document.getElementById('tag').value.trim(),
      hidden: document.getElementById('hidden').checked,
      img: ''  // ÙÛŒÙ„Ø¯ ØªØµÙˆÛŒØ± Ø­Ø°Ù Ø´Ø¯Ù‡ØŒ Ù…Ù‚Ø¯Ø§Ø± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø®Ø§Ù„ÛŒ
    };
    if (!item.name || !item.price) return;

    if (editingIndex !== null) {
      menu[editingIndex] = item;
    } else {
      menu.push(item);
    }
    saveAndRender();
    closeModal();
  });

  // Ø±Ù†Ø¯Ø± Ù…Ù†Ùˆ Ø¨Ø§ Ø§Ø¹Ù…Ø§Ù„ ÙÛŒÙ„ØªØ± Ùˆ Ø¬Ø³ØªØ¬Ùˆ
  function render() {
    const container = document.getElementById('menu');
    const emptyMsg = document.getElementById('emptyMessage');
    const addBtn = document.getElementById('addBtn');
    const modeEl = document.getElementById('mode');
    const itemCountSpan = document.getElementById('itemCount');

    // Ù†Ù…Ø§ÛŒØ´ Ø¯Ú©Ù…Ù‡ Ø§ÙØ²ÙˆØ¯Ù† ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±
    addBtn.style.display = admin ? 'block' : 'none';
    modeEl.textContent = admin ? 'ğŸ‘¤ Ø­Ø§Ù„Øª Ù…Ø¯ÛŒØ±' : 'ğŸ‘ Ø­Ø§Ù„Øª Ù…Ø´Ø§Ù‡Ø¯Ù‡';

    // ÙÛŒÙ„ØªØ± Ùˆ Ø¬Ø³ØªØ¬Ùˆ
    let filtered = menu.filter(item => {
      // ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¯Ø³ØªÙ‡
      if (currentFilter !== 'all' && item.category !== currentFilter) return false;
      // Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù†Ø§Ù…
      if (searchTerm && !item.name.includes(searchTerm)) return false;
      return true;
    });

    // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡
    itemCountSpan.innerText = filtered.length;

    if (filtered.length === 0) {
      emptyMsg.style.display = 'block';
      container.innerHTML = '';
      return;
    } else {
      emptyMsg.style.display = 'none';
    }

    // Ø³Ø§Ø®Øª Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§
    container.innerHTML = '';
    filtered.forEach((item, idx) => {
      // Ø§ÛŒÙ†Ø¯Ú©Ø³ Ø§ØµÙ„ÛŒ Ø¯Ø± Ø¢Ø±Ø§ÛŒÙ‡ menu Ø±Ø§ Ù¾ÛŒØ¯Ø§ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… (Ø¨Ø±Ø§ÛŒ ÙˆÛŒØ±Ø§ÛŒØ´/Ø­Ø°Ù)
      const originalIndex = menu.findIndex(m => m.name === item.name && m.price === item.price); // Ø³Ø§Ø¯Ù‡ Ø´Ø¯Ù‡ØŒ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡ ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ù‡ØªØ±Ù‡ Ø§Ø² id Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯
      // (Ø¯Ø± Ø§ÛŒÙ† Ø¯Ù…Ùˆ Ø§Ø² ØªØ±Ú©ÛŒØ¨ Ù†Ø§Ù… Ùˆ Ù‚ÛŒÙ…Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…ØŒ Ø¯Ù‚Øª Ú©Ù†ÛŒØ¯ Ø§Ú¯Ø± Ø¢ÛŒØªÙ… ØªÚ©Ø±Ø§Ø±ÛŒ Ø¨Ø§Ø´Ø¯ Ù…Ù…Ú©Ù†Ù‡ Ø§Ø´ØªØ¨Ø§Ù‡ Ø´ÙˆØ¯ØŒ Ø§Ù…Ø§ Ø¨Ø±Ø§ÛŒ ØªÙ…Ø±ÛŒÙ† Ú©Ø§ÙÛŒØ³Øª)

      const div = document.createElement('div');
      div.className = 'card' + (item.hidden ? ' hidden' : '');

      let controlsHtml = '';
      if (admin) {
        controlsHtml = `<div class="admin-controls">
          <button class="edit" onclick="editItem(${originalIndex})">âœ ÙˆÛŒØ±Ø§ÛŒØ´</button>
          <button class="delete" onclick="deleteItem(${originalIndex})">ğŸ—‘ Ø­Ø°Ù</button>
        </div>`;
      }

      // Ø¢ÛŒÚ©ÙˆÙ† Ù¾ÛŒØ´â€ŒÙØ±Ø¶
      const imgSrc = item.img && item.img.trim() !== '' ? item.img : 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24" fill="%23aaa"><path d="M0 0h24v24H0z" fill="none"/><path d="M21 5v14H3V5h18zm0-2H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 9c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"/></svg>';

      div.innerHTML = `
        <img class="foodimg" src="${imgSrc}" alt="ØºØ°Ø§">
        <div class="info">
          <b>${item.name}</b>
          <div><span class="category-badge">${item.category || ''}</span></div>
          ${item.tag ? `<span class='tag'>ğŸ· ${item.tag}</span>` : ''}
        </div>
        <div class="price">${item.price} ØªÙˆÙ…Ø§Ù†</div>
        ${controlsHtml}
      `;
      container.appendChild(div);
    });
  }

  // Ù…Ø¯ÛŒØ±ÛŒØª ÙÛŒÙ„ØªØ±Ù‡Ø§
  document.querySelectorAll('.filter-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      currentFilter = this.dataset.filter;
      render();
    });
  });

  // Ø¬Ø³ØªØ¬Ùˆ
  document.getElementById('searchInput').addEventListener('input', function(e) {
    searchTerm = e.target.value;
    render();
  });

  // ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±
  function toggleAdmin() {
    const pass = prompt('Ø±Ù…Ø² Ù…Ø¯ÛŒØ± Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:');
    if (pass === '1234') {
      admin = !admin;
      render();
    } else {
      alert('Ø±Ù…Ø² Ù†Ø§Ø¯Ø±Ø³Øª Ø§Ø³Øª');
    }
  }

  // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
  render();

  // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† event listener Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡ Ø§ÙØ²ÙˆØ¯Ù† (Ù…ÙˆØ¯Ø§Ù„)
  // Ù‚Ø¨Ù„Ø§Ù‹ Ø¯Ø± onclick ØªØ¹Ø±ÛŒÙ Ø´Ø¯Ù‡
</script>

</body>
</html>
